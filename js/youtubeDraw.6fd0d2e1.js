(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["youtubeDraw"],{"1df9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h1",[t._v(t._s(t.$t("title.youtubeDraw")))]),a("p",{staticClass:"lead"},[t._v("\n        "+t._s(t.$t("description.youtubeDraw"))+"\n    ")]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-main-color h4",attrs:{for:"youtubeUrl"}},[t._v(t._s(t.$t("text.videoUrl")))]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.videoUrl,expression:"videoUrl"}],staticClass:"form-control",attrs:{type:"text",id:"youtubeUrl","aria-describedby":"youtubeUrlFetchMsg",placeholder:"https://www.youtube.com/watch?v=#########"},domProps:{value:t.videoUrl},on:{input:function(e){e.target.composing||(t.videoUrl=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:"stale"!==t.commentStatus},on:{click:t.fetch}},[t._v(t._s(t.$t("text.fetchComment"))+"\n                        ")])])]),"fetching"===t.commentStatus?a("small",{staticClass:"form-text text-muted",attrs:{id:"youtubeUrlFetchMsg"}},[a("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),t._v("\n                    "+t._s(t.$t("text.fetchingComment"))+" "+t._s(t.commentThreadsCount)+"...\n                ")],1):t._e(),"ready"===t.commentStatus?a("small",{staticClass:"form-text text-muted",attrs:{id:"youtubeUrlFetchMsg"}},[t._v("\n                    "+t._s(t.$t("text.total{0}Comment",[t.commentThreadsCount]))+"\n                ")]):t._e()])]),a("div",{staticClass:"col-12 col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-main-color h4"},[t._v(t._s(t.$t("text.drawPersonCount")))]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.drawNumber,expression:"drawNumber",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.drawNumber},on:{input:function(e){e.target.composing||(t.drawNumber=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"col-12 mt-2"},[a("SettingFilter")],1)]),a("div",{staticClass:"row justify-content-center mt-5"},[a("div",{staticClass:"col-6 col-sm-4 col-md-3 col-lg-2"},[a("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:"ready"!==t.commentStatus||"ready"!==t.drawStatus},on:{click:t.run}},[t._v("\n                "+t._s(t.$t("text.startDraw"))+"\n            ")])]),a("div",{staticClass:"col-6 col-sm-4 col-md-3 col-lg-2"},[a("button",{staticClass:"btn btn-secondary btn-block",attrs:{disabled:"ready"!==t.commentStatus||"ready"!==t.drawStatus},on:{click:t.preview}},[t._v("\n                "+t._s(t.$t("text.reviewSomeComment"))+"\n            ")])]),a("div",{staticClass:"col-6 col-sm-4 col-md-3 col-lg-2"},[t.filterSetting.enableList.includes("continuousDrawNoRepeated")?a("button",{staticClass:"btn btn-danger btn-block",attrs:{disabled:"ready"!==t.commentStatus||"ready"!==t.drawStatus},on:{click:t.reset}},[t._v("\n                "+t._s(t.$t("text.reset"))+"\n            ")]):t._e()])]),a("br"),"drawing"===t.drawStatus?a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar progress-bar-striped progress-bar-striped bg-success",style:{width:t.nowDrawCount/t.drawNumber*100+"%"},attrs:{role:"progressbar"}},[t._v("\n            "+t._s(t.nowDrawCount)+" / "+t._s(t.drawNumber)+"\n        ")])]):t._e(),a("div",{staticClass:"text-center"},["ready"===t.commentStatus?a("small",{staticClass:"form-text text-muted"},[t._v("\n            "+t._s(t.showCount)+" / "+t._s(t.showTotalCount)+"\n        ")]):t._e()]),a("CommentTable",{staticClass:"mt-2"})],1)},i=[],n=(a("4917"),a("1da1")),r=a("be94"),o=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{staticClass:"text-main-color h4"},[t._v(t._s(t.$t("text.filterCondition")))]),a("div",{staticClass:"form-inline"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"textLengthGtNumber",id:"textLengthGtNumberCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"textLengthGtNumber")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="textLengthGtNumber",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"textLengthGtNumberCheck"}},[t._v("\n                "+t._s(t.$t("message.commentLengthGt"))+"\n            ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.textLengthGtNumber,expression:"textLengthGtNumber"}],staticClass:"form-control form-control-sm ml-1",attrs:{type:"number"},domProps:{value:t.textLengthGtNumber},on:{input:function(e){e.target.composing||(t.textLengthGtNumber=e.target.value)}}})]),a("div",{staticClass:"form-inline mt-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"textContain",id:"textContainCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"textContain")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="textContain",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"textContainCheck"}},[t._v("\n                "+t._s(t.$t("message.commentContain"))+"\n            ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.textContain,expression:"textContain"}],staticClass:"form-control form-control-sm ml-1",attrs:{type:"text"},domProps:{value:t.textContain},on:{input:function(e){e.target.composing||(t.textContain=e.target.value)}}})]),a("div",{staticClass:"form-inline mt-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"textLikeGtNumber",id:"textLikeGtNumberCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"textLikeGtNumber")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="textLikeGtNumber",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"textLikeGtNumberCheck"}},[t._v("\n                "+t._s(t.$t("message.commentLikeGt"))+"\n            ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.textLikeGtNumber,expression:"textLikeGtNumber"}],staticClass:"form-control form-control-sm ml-1",attrs:{type:"number"},domProps:{value:t.textLikeGtNumber},on:{input:function(e){e.target.composing||(t.textLikeGtNumber=e.target.value)}}})]),a("div",{staticClass:"form-inline mt-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"continuousDrawNoRepeated",id:"continuousDrawNoRepeatedCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"continuousDrawNoRepeated")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="continuousDrawNoRepeated",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"continuousDrawNoRepeatedCheck"}},[t._v("\n                "+t._s(t.$t("message.continuousDrawNoRepeated"))+"\n            ")])])]),a("div",{staticClass:"form-inline mt-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"duplicateUsers",id:"duplicateUsersCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"duplicateUsers")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="duplicateUsers",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"duplicateUsersCheck"}},[t._v("\n                "+t._s(t.$t("text.duplicateUsers"))+"\n            ")])])]),a("div",{staticClass:"form-inline mt-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"isSubscriptCheck",id:"isSubscriptCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"isSubscriptCheck")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="isSubscriptCheck",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"isSubscriptCheck"}},[t._v("\n                "+t._s(t.$t("text.hasSubscript"))),a("small",{staticClass:"text-muted ml-1"},[t._v(t._s(t.$t("message.isSubscriptCheck")))])])])]),a("div",{staticClass:"form-inline mt-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enableList,expression:"enableList"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"datetimeRange",id:"datetimeRangeCheck"},domProps:{checked:Array.isArray(t.enableList)?t._i(t.enableList,"datetimeRange")>-1:t.enableList},on:{change:function(e){var a=t.enableList,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="datetimeRange",r=t._i(a,n);s.checked?r<0&&(t.enableList=a.concat([n])):r>-1&&(t.enableList=a.slice(0,r).concat(a.slice(r+1)))}else t.enableList=i}}}),a("label",{staticClass:"form-check-label",attrs:{for:"datetimeRangeCheck"}},[t._v("\n                "+t._s(t.$t("text.dateRange"))+"\n            ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.startDateTime,expression:"startDateTime"}],staticClass:"form-control form-control-sm ml-1",attrs:{type:"datetime-local"},domProps:{value:t.startDateTime},on:{input:function(e){e.target.composing||(t.startDateTime=e.target.value)}}}),t._v(" - \n        "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.endDateTime,expression:"endDateTime"}],staticClass:"form-control form-control-sm ml-1",attrs:{type:"datetime-local"},domProps:{value:t.endDateTime},on:{input:function(e){e.target.composing||(t.endDateTime=e.target.value)}}})])])},c=[],m=a("5935"),u={data(){return{}},methods:{},computed:Object(r["a"])({},Object(m["b"])("YoutubeDraw",["filterSetting.enableList","filterSetting.textLengthGtNumber","filterSetting.textContain","filterSetting.textLikeGtNumber","filterSetting.startDateTime","filterSetting.endDateTime"])),watch:{},components:{},mounted(){}},d=u,b=a("2877"),h=Object(b["a"])(d,l,c,!1,null,"2557c678",null),p=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col",width:"18%"}},[t._v(t._s(t.$t("text.displayName")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("text.commentContent")))]),a("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[a("font-awesome-icon",{attrs:{icon:"thumbs-up"}})],1),a("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v(t._s(t.$t("text.replyCount")))]),a("th",[t._v(" ")]),a("th",{attrs:{scope:"col",width:"15%"}},[t._v(t._s(t.$t("text.publishTime")))])])]),a("tbody",t._l(t.comments,function(e){return a("tr",[a("th",{attrs:{scope:"row"}},[a("img",{staticClass:"rounded-circle mr-2",attrs:{src:e.author.avatar,alt:e.author.name}}),a("a",{attrs:{href:e.author.channelUrl}},[t._v(t._s(e.author.name))])]),a("td",[a("div",{staticStyle:{"max-height":"25vh","max-width":"40rem",overflow:"auto"},domProps:{innerHTML:t._s(e.textDisplay)}})]),a("td",[t._v(t._s(e.likeCount))]),a("td",[t._v(t._s(e.totalReplyCount))]),a("td",[a("a",{staticClass:"text-danger",attrs:{href:e.url,target:"_blank"}},[a("font-awesome-icon",{attrs:{icon:["fab","youtube"],size:"lg"}})],1)]),a("td",{staticClass:"text-nowrap"},[t._v(t._s(t._f("formatDate")(e.publishedAt)))])])}),0)])])},C=[],f={data(){return{}},methods:{},computed:Object(r["a"])({},Object(o["c"])("YoutubeDraw",["comments"])),watch:{},components:{},mounted(){}},g=f,w=Object(b["a"])(g,v,C,!1,null,"145917e0",null),L=w.exports,x=a("6275"),k=a("5110"),_={metaInfo(){return{title:this.$i18n.t("title.youtubeDraw"),meta:[]}},data(){return{drawNumber:1,videoUrl:"",commentStatus:"stale",drawStatus:"ready",previousComments:[],showCount:0,showTotalCount:0,nowDrawCount:0}},methods:Object(r["a"])({},Object(o["b"])("YoutubeApi",["callCommentThreads","getVideoDetail"]),{getWinningComments(t){var e=this;return Object(n["a"])(function*(){let a=[];e.nowDrawCount=0;do{let s=x["b"].random(0,t.length-1),i=t[s];if(e.filterSetting.enableList.includes("isSubscriptCheck")&&!(yield k["a"].checkHasSubscript(e.getVideoDetail.channelId,i.author.channelId.value))||(a.push(i),t.splice(s,1),e.nowDrawCount++),0===t.length)break}while(a.length<e.drawNumber);return a})()},run(){this.drawStatus="drawing",this.comments=[];let t=this.filterSetting.enableList.includes("continuousDrawNoRepeated")&&this.previousComments.length>0,e=this.filter(t?this.previousComments:this.commentThreads);this.showTotalCount=e.length,this.previousComments=e,this.getWinningComments(e).then(t=>{this.comments=t,this.showCount=this.comments.length,this.drawStatus="ready"})},preview(){let t=this.filter(this.commentThreads);this.comments=t.slice(0,25),this.showCount=this.comments.length,this.showTotalCount=t.length},reset(){this.previousComments=[],this.comments=[],this.showCount=0,this.showTotalCount=0},filter(t){let e,a=this.filterSetting,s=[];return e=t.filter(t=>{let e=!0;if(a.enableList.includes("textLengthGtNumber")&&(e=e&&t.textDisplay.length>parseInt(a.textLengthGtNumber)),a.enableList.includes("textContain")&&(e=e&&t.textDisplay.includes(a.textContain)),a.enableList.includes("textLikeGtNumber")&&(e=e&&t.likeCount>parseInt(a.textLikeGtNumber)),a.enableList.includes("datetimeRange")&&(e=e&&new Date(a.startDateTime)<=new Date(t.publishedAt)&&new Date(a.endDateTime)>=new Date(t.publishedAt)),a.enableList.includes("duplicateUsers")){let a=s.includes(t.author.channelId.value);e=e&&!a,a||s.push(t.author.channelId.value)}return e}),e},fetch(){let t=this.videoUrl.match(/^https:\/\/www\.youtube\.com\/watch\?v=(.*)$/);if(!t)return void console.log("error");this.commentStatus="fetching";let e=t[1];this.getVideoDetail(e),this.callCommentThreads({videoId:e}).then(()=>{this.commentStatus="ready"})}}),computed:Object(r["a"])({},Object(o["c"])("YoutubeApi",["commentThreads","commentThreadsCount","videoDetail"]),Object(o["c"])("YoutubeDraw",["filterSetting"]),Object(m["b"])("YoutubeDraw",["comments"])),watch:{videoUrl(){this.commentStatus="stale",this.previousComments=[]}},components:{SettingFilter:p,CommentTable:L},mounted(){}},y=_,N=Object(b["a"])(y,s,i,!1,null,"46880fe0",null);e["default"]=N.exports},be94:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){s(t,e,a[e])})}return t}a.d(e,"a",function(){return i})}}]);